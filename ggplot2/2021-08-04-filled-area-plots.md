---
description: How to make Filled Area Plots in ggplot2 with Plotly.
name: Filled Area
permalink: ggplot2/filled-area-plots/
thumnail_github: filled-area-plots.png
layout: base
language: ggplot2
display_as: basic
page_type: u-guide
order: 7
output:
  html_document:
    keep_md: true
---



## Basic stacked area plot

The data frame used as input to build a stacked area chart requires 3 columns:
* `x`: numeric variable used for the X axis, often it is a time.
* `y`: numeric variable used for the Y axis. What are we looking at?
* `group`: one shape will be done per group.

The chart is built using the `geom_area()` function.


```r
library(plotly)
library(ggplot2)
library(dplyr)

time <- as.numeric(rep(seq(1,7),each=7))
value <- runif(49, 10, 100)
group <- rep(LETTERS[1:7],times=7)
data <- data.frame(time, value, group)

p <- ggplot(data, aes(x=time, y=value, fill=group)) + 
    geom_area()

ggplotly(p)
```

<div id="htmlwidget-ba96009be116304810c0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba96009be116304810c0">{"x":{"data":[{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[436.97557236068,370.633046929725,241.464266222902,213.977785336319,296.500916169025,302.531046112999,457.07138822414,471.524497703649,320.36038013408,343.613029399421,304.388676905073,306.15153728053,457.611428094096,499.973581873346,436.97557236068],"text":["time: 1<br />value: 62.99801","time: 2<br />value: 86.97838","time: 3<br />value: 64.68727","time: 4<br />value: 90.41089","time: 5<br />value: 47.11211","time: 6<br />value: 17.82933","time: 7<br />value: 14.45311","time: 7<br />value: 14.45311","time: 6<br />value: 17.82933","time: 5<br />value: 47.11211","time: 4<br />value: 90.41089","time: 3<br />value: 64.68727","time: 2<br />value: 86.97838","time: 1<br />value: 62.99801","time: 1<br />value: 62.99801"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(248,118,109,1)","hoveron":"points","name":"A","legendgroup":"A","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[362.027438757941,342.04141394468,167.01443169266,193.455119200516,280.336000800598,275.201892764308,366.09134623548,457.07138822414,302.531046112999,296.500916169025,213.977785336319,241.464266222902,370.633046929725,436.97557236068,362.027438757941],"text":["time: 1<br />value: 74.94813","time: 2<br />value: 28.59163","time: 3<br />value: 74.44983","time: 4<br />value: 20.52267","time: 5<br />value: 16.16492","time: 6<br />value: 27.32915","time: 7<br />value: 90.98004","time: 7<br />value: 90.98004","time: 6<br />value: 27.32915","time: 5<br />value: 16.16492","time: 4<br />value: 20.52267","time: 3<br />value: 74.44983","time: 2<br />value: 28.59163","time: 1<br />value: 74.94813","time: 1<br />value: 74.94813"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(196,154,0,1)","hoveron":"points","name":"B","legendgroup":"B","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[294.246075002011,242.920483683702,122.906684877817,149.291860319208,250.080477453303,181.58666834468,284.247363163158,366.09134623548,275.201892764308,280.336000800598,193.455119200516,167.01443169266,342.04141394468,362.027438757941,294.246075002011],"text":["time: 1<br />value: 67.78136","time: 2<br />value: 99.12093","time: 3<br />value: 44.10775","time: 4<br />value: 44.16326","time: 5<br />value: 30.25552","time: 6<br />value: 93.61522","time: 7<br />value: 81.84398","time: 7<br />value: 81.84398","time: 6<br />value: 93.61522","time: 5<br />value: 30.25552","time: 4<br />value: 44.16326","time: 3<br />value: 44.10775","time: 2<br />value: 99.12093","time: 1<br />value: 67.78136","time: 1<br />value: 67.78136"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(83,180,0,1)","hoveron":"points","name":"C","legendgroup":"C","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[201.894043455832,176.083521677647,100.392005494796,131.226610362064,165.996215322521,128.555601434782,204.364211170468,284.247363163158,181.58666834468,250.080477453303,149.291860319208,122.906684877817,242.920483683702,294.246075002011,201.894043455832],"text":["time: 1<br />value: 92.35203","time: 2<br />value: 66.83696","time: 3<br />value: 22.51468","time: 4<br />value: 18.06525","time: 5<br />value: 84.08426","time: 6<br />value: 53.03107","time: 7<br />value: 79.88315","time: 7<br />value: 79.88315","time: 6<br />value: 53.03107","time: 5<br />value: 84.08426","time: 4<br />value: 18.06525","time: 3<br />value: 22.51468","time: 2<br />value: 66.83696","time: 1<br />value: 92.35203","time: 1<br />value: 92.35203"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,192,148,1)","hoveron":"points","name":"D","legendgroup":"D","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[154.894959225785,121.565243776422,46.9760436029173,109.050555068534,110.901201253291,81.7389366705902,119.752790320199,204.364211170468,128.555601434782,165.996215322521,131.226610362064,100.392005494796,176.083521677647,201.894043455832,154.894959225785],"text":["time: 1<br />value: 46.99908","time: 2<br />value: 54.51828","time: 3<br />value: 53.41596","time: 4<br />value: 22.17606","time: 5<br />value: 55.09501","time: 6<br />value: 46.81666","time: 7<br />value: 84.61142","time: 7<br />value: 84.61142","time: 6<br />value: 46.81666","time: 5<br />value: 55.09501","time: 4<br />value: 22.17606","time: 3<br />value: 53.41596","time: 2<br />value: 54.51828","time: 1<br />value: 46.99908","time: 1<br />value: 46.99908"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,182,235,1)","hoveron":"points","name":"E","legendgroup":"E","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[70.172451462131,99.9935616296716,24.6428284840658,80.129748925101,54.9469553353265,33.7093357509002,35.1263890392147,119.752790320199,81.7389366705902,110.901201253291,109.050555068534,46.9760436029173,121.565243776422,154.894959225785,70.172451462131],"text":["time: 1<br />value: 84.72251","time: 2<br />value: 21.57168","time: 3<br />value: 22.33322","time: 4<br />value: 28.92081","time: 5<br />value: 55.95425","time: 6<br />value: 48.02960","time: 7<br />value: 84.62640","time: 7<br />value: 84.62640","time: 6<br />value: 48.02960","time: 5<br />value: 55.95425","time: 4<br />value: 28.92081","time: 3<br />value: 22.33322","time: 2<br />value: 21.57168","time: 1<br />value: 84.72251","time: 1<br />value: 84.72251"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(165,138,255,1)","hoveron":"points","name":"F","legendgroup":"F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,7,6,5,4,3,2,1,1],"y":[0,0,0,0,0,0,0,0,35.1263890392147,33.7093357509002,54.9469553353265,80.129748925101,24.6428284840658,99.9935616296716,70.172451462131,0],"text":["time: 1<br />value: 70.17245","time: 2<br />value: 99.99356","time: 3<br />value: 24.64283","time: 4<br />value: 80.12975","time: 5<br />value: 54.94696","time: 6<br />value: 33.70934","time: 7<br />value: 35.12639","time: 7<br />value: 35.12639","time: 7<br />value: 35.12639","time: 6<br />value: 33.70934","time: 5<br />value: 54.94696","time: 4<br />value: 80.12975","time: 3<br />value: 24.64283","time: 2<br />value: 99.99356","time: 1<br />value: 70.17245","time: 1<br />value: 70.17245"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(251,97,215,1)","hoveron":"points","name":"G","legendgroup":"G","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.7,7.3],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-24.9986790936673,524.972260967013],"tickmode":"array","ticktext":["0","100","200","300","400","500"],"tickvals":[0,100,200,300,400,500],"categoryorder":"array","categoryarray":["0","100","200","300","400","500"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"value","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"group","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3bac5b44ade2":{"x":{},"y":{},"fill":{},"type":"scatter"}},"cur_data":"3bac5b44ade2","visdat":{"3bac5b44ade2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>




## Control stacking order

The gallery offers a post dedicated to reordering with ggplot2. This step can be tricky but the code below shows how to:

* give a specific order with the `factor()` function.
* order alphabetically using `sort()`
* order following values at a specific data


```r
library(plotly)
library(ggplot2)
library(dplyr)

time <- as.numeric(rep(seq(1,7),each=7))
value <- runif(49, 10, 100)
group <- rep(LETTERS[1:7],times=7)
data <- data.frame(time, value, group)

data$group <- factor(data$group , levels=c("B", "A", "D", "E", "G", "F", "C") )

p <- ggplot(data, aes(x=time, y=value, fill=group)) + 
    geom_area()

ggplotly(p)
```

<div id="htmlwidget-ca3926c6deef98831c3a" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ca3926c6deef98831c3a">{"x":{"data":[{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[286.228908332996,314.522577642929,294.451795548666,354.9103423208,313.848290140741,339.099373442587,315.066088638268,371.898058329243,426.676637670025,412.3086876655,424.469390686136,336.420652901288,389.935414225329,321.045258087106,286.228908332996],"text":["time: 1<br />value: 34.81635","time: 2<br />value: 75.41284","time: 3<br />value: 41.96886","time: 4<br />value: 69.55905","time: 5<br />value: 98.46040","time: 6<br />value: 87.57726","time: 7<br />value: 56.83197","time: 7<br />value: 56.83197","time: 6<br />value: 87.57726","time: 5<br />value: 98.46040","time: 4<br />value: 69.55905","time: 3<br />value: 41.96886","time: 2<br />value: 75.41284","time: 1<br />value: 34.81635","time: 1<br />value: 34.81635"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(248,118,109,1)","hoveron":"points","name":"B","legendgroup":"B","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[221.480813093949,250.633626724593,220.864868268836,284.359959226567,293.723789257929,307.366252497304,267.722170921043,315.066088638268,339.099373442587,313.848290140741,354.9103423208,294.451795548666,314.522577642929,286.228908332996,221.480813093949],"text":["time: 1<br />value: 64.74810","time: 2<br />value: 63.88895","time: 3<br />value: 73.58693","time: 4<br />value: 70.55038","time: 5<br />value: 20.12450","time: 6<br />value: 31.73312","time: 7<br />value: 47.34392","time: 7<br />value: 47.34392","time: 6<br />value: 31.73312","time: 5<br />value: 20.12450","time: 4<br />value: 70.55038","time: 3<br />value: 73.58693","time: 2<br />value: 63.88895","time: 1<br />value: 64.74810","time: 1<br />value: 64.74810"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(196,154,0,1)","hoveron":"points","name":"A","legendgroup":"A","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[137.438629290555,184.456910290755,204.004349065945,270.128435730003,197.777961427346,247.939048882108,221.291158339009,267.722170921043,307.366252497304,293.723789257929,284.359959226567,220.864868268836,250.633626724593,221.480813093949,137.438629290555],"text":["time: 1<br />value: 84.04218","time: 2<br />value: 66.17672","time: 3<br />value: 16.86052","time: 4<br />value: 14.23152","time: 5<br />value: 95.94583","time: 6<br />value: 59.42720","time: 7<br />value: 46.43101","time: 7<br />value: 46.43101","time: 6<br />value: 59.42720","time: 5<br />value: 95.94583","time: 4<br />value: 14.23152","time: 3<br />value: 16.86052","time: 2<br />value: 66.17672","time: 1<br />value: 84.04218","time: 1<br />value: 84.04218"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(83,180,0,1)","hoveron":"points","name":"D","legendgroup":"D","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[125.019512018189,125.862577355001,155.645093384665,190.477514527738,127.72233473137,216.917450807523,191.048263837583,221.291158339009,247.939048882108,197.777961427346,270.128435730003,204.004349065945,184.456910290755,137.438629290555,125.019512018189],"text":["time: 1<br />value: 12.41912","time: 2<br />value: 58.59433","time: 3<br />value: 48.35926","time: 4<br />value: 79.65092","time: 5<br />value: 70.05563","time: 6<br />value: 31.02160","time: 7<br />value: 30.24289","time: 7<br />value: 30.24289","time: 6<br />value: 31.02160","time: 5<br />value: 70.05563","time: 4<br />value: 79.65092","time: 3<br />value: 48.35926","time: 2<br />value: 58.59433","time: 1<br />value: 12.41912","time: 1<br />value: 12.41912"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,192,148,1)","hoveron":"points","name":"E","legendgroup":"E","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[50.9682437730953,79.7310216957703,108.533121850342,110.607703633141,109.827043409459,118.289763738867,123.573193850461,191.048263837583,216.917450807523,127.72233473137,190.477514527738,155.645093384665,125.862577355001,125.019512018189,50.9682437730953],"text":["time: 1<br />value: 74.05127","time: 2<br />value: 46.13156","time: 3<br />value: 47.11197","time: 4<br />value: 79.86981","time: 5<br />value: 17.89529","time: 6<br />value: 98.62769","time: 7<br />value: 67.47507","time: 7<br />value: 67.47507","time: 6<br />value: 98.62769","time: 5<br />value: 17.89529","time: 4<br />value: 79.86981","time: 3<br />value: 47.11197","time: 2<br />value: 46.13156","time: 1<br />value: 74.05127","time: 1<br />value: 74.05127"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,182,235,1)","hoveron":"points","name":"G","legendgroup":"G","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[13.8677027774975,17.9980756458826,23.5693788062781,44.3037094874308,35.084959869273,48.8047582982108,93.1130222300999,123.573193850461,118.289763738867,109.827043409459,110.607703633141,108.533121850342,79.7310216957703,50.9682437730953,13.8677027774975],"text":["time: 1<br />value: 37.10054","time: 2<br />value: 61.73295","time: 3<br />value: 84.96374","time: 4<br />value: 66.30399","time: 5<br />value: 74.74208","time: 6<br />value: 69.48501","time: 7<br />value: 30.46017","time: 7<br />value: 30.46017","time: 6<br />value: 69.48501","time: 5<br />value: 74.74208","time: 4<br />value: 66.30399","time: 3<br />value: 84.96374","time: 2<br />value: 61.73295","time: 1<br />value: 37.10054","time: 1<br />value: 37.10054"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(165,138,255,1)","hoveron":"points","name":"F","legendgroup":"F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,7,6,5,4,3,2,1,1],"y":[0,0,0,0,0,0,0,0,93.1130222300999,48.8047582982108,35.084959869273,44.3037094874308,23.5693788062781,17.9980756458826,13.8677027774975,0],"text":["time: 1<br />value: 13.86770","time: 2<br />value: 17.99808","time: 3<br />value: 23.56938","time: 4<br />value: 44.30371","time: 5<br />value: 35.08496","time: 6<br />value: 48.80476","time: 7<br />value: 93.11302","time: 7<br />value: 93.11302","time: 7<br />value: 93.11302","time: 6<br />value: 48.80476","time: 5<br />value: 35.08496","time: 4<br />value: 44.30371","time: 3<br />value: 23.56938","time: 2<br />value: 17.99808","time: 1<br />value: 13.86770","time: 1<br />value: 13.86770"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(251,97,215,1)","hoveron":"points","name":"C","legendgroup":"C","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.7,7.3],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-21.3338318835013,448.010469553526],"tickmode":"array","ticktext":["0","100","200","300","400"],"tickvals":[0,100,200,300,400],"categoryorder":"array","categoryarray":["0","100","200","300","400"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"value","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"group","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3bac66803c08":{"x":{},"y":{},"fill":{},"type":"scatter"}},"cur_data":"3bac66803c08","visdat":{"3bac66803c08":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>



## Proportional stack
In a proportional stacked area graph, the sum of each year is always equal to hundred and value of each group is represented through percentages.


```r
library(plotly)
library(ggplot2)
library(dplyr)
data <- data  %>%
  group_by(time, group) %>%
  summarise(n = sum(value)) %>%
  mutate(percentage = n / sum(n))

p <- ggplot(data, aes(x=time, y=percentage, fill=group)) + 
    geom_area(alpha=0.6 , size=1, colour="black")

ggplotly(p)
```

<div id="htmlwidget-903b6993091e27bdcc9e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-903b6993091e27bdcc9e">{"x":{"data":[{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.891553141256291,0.806601724718387,0.875248867777044,0.836127056763983,0.761197373544943,0.794745583668053,0.84718401073054,1,1,1,1,1,1,1,0.891553141256291],"text":["time: 1<br />percentage: 0.10844686","time: 2<br />percentage: 0.19339828","time: 3<br />percentage: 0.12475113","time: 4<br />percentage: 0.16387294","time: 5<br />percentage: 0.23880263","time: 6<br />percentage: 0.20525442","time: 7<br />percentage: 0.15281599","time: 7<br />percentage: 0.15281599","time: 6<br />percentage: 0.20525442","time: 5<br />percentage: 0.23880263","time: 4<br />percentage: 0.16387294","time: 3<br />percentage: 0.12475113","time: 2<br />percentage: 0.19339828","time: 1<br />percentage: 0.10844686","time: 1<br />percentage: 0.10844686"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(248,118,109,0.6)","hoveron":"points","name":"B","legendgroup":"B","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.689874114365075,0.642756768380524,0.656513999256883,0.669918645410243,0.712388067593237,0.720372819509769,0.719880528884146,0.84718401073054,0.794745583668053,0.761197373544943,0.836127056763983,0.875248867777044,0.806601724718387,0.891553141256291,0.689874114365075],"text":["time: 1<br />percentage: 0.20167903","time: 2<br />percentage: 0.16384496","time: 3<br />percentage: 0.21873487","time: 4<br />percentage: 0.16620841","time: 5<br />percentage: 0.04880931","time: 6<br />percentage: 0.07437276","time: 7<br />percentage: 0.12730348","time: 7<br />percentage: 0.12730348","time: 6<br />percentage: 0.07437276","time: 5<br />percentage: 0.04880931","time: 4<br />percentage: 0.16620841","time: 3<br />percentage: 0.21873487","time: 2<br />percentage: 0.16384496","time: 1<br />percentage: 0.20167903","time: 1<br />percentage: 0.20167903"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(196,154,0,0.6)","hoveron":"points","name":"A","legendgroup":"A","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.428097365802752,0.473044775010266,0.60639662668333,0.636390848568261,0.47968419619574,0.581093565928619,0.595031765783242,0.719880528884146,0.720372819509769,0.712388067593237,0.669918645410243,0.656513999256883,0.642756768380524,0.689874114365075,0.428097365802752],"text":["time: 1<br />percentage: 0.26177675","time: 2<br />percentage: 0.16971199","time: 3<br />percentage: 0.05011737","time: 4<br />percentage: 0.03352780","time: 5<br />percentage: 0.23270387","time: 6<br />percentage: 0.13927925","time: 7<br />percentage: 0.12484876","time: 7<br />percentage: 0.12484876","time: 6<br />percentage: 0.13927925","time: 5<br />percentage: 0.23270387","time: 4<br />percentage: 0.03352780","time: 3<br />percentage: 0.05011737","time: 2<br />percentage: 0.16971199","time: 1<br />percentage: 0.26177675","time: 1<br />percentage: 0.26177675"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(83,180,0,0.6)","hoveron":"points","name":"D","legendgroup":"D","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.389413980954263,0.32277801082789,0.462650232803435,0.448742638944683,0.309773571482417,0.508388394527657,0.513711377509929,0.595031765783242,0.581093565928619,0.47968419619574,0.636390848568261,0.60639662668333,0.473044775010266,0.428097365802752,0.389413980954263],"text":["time: 1<br />percentage: 0.03868338","time: 2<br />percentage: 0.15026676","time: 3<br />percentage: 0.14374639","time: 4<br />percentage: 0.18764821","time: 5<br />percentage: 0.16991062","time: 6<br />percentage: 0.07270517","time: 7<br />percentage: 0.08132039","time: 7<br />percentage: 0.08132039","time: 6<br />percentage: 0.07270517","time: 5<br />percentage: 0.16991062","time: 4<br />percentage: 0.18764821","time: 3<br />percentage: 0.14374639","time: 2<br />percentage: 0.15026676","time: 1<br />percentage: 0.03868338","time: 1<br />percentage: 0.03868338"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,192,148,0.6)","hoveron":"points","name":"E","legendgroup":"E","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.158757192293638,0.204472378724998,0.322611352526526,0.260578750930305,0.266370917458233,0.277235154905171,0.332277061100065,0.513711377509929,0.508388394527657,0.309773571482417,0.448742638944683,0.462650232803435,0.32277801082789,0.389413980954263,0.158757192293638],"text":["time: 1<br />percentage: 0.23065679","time: 2<br />percentage: 0.11830563","time: 3<br />percentage: 0.14003888","time: 4<br />percentage: 0.18816389","time: 5<br />percentage: 0.04340265","time: 6<br />percentage: 0.23115324","time: 7<br />percentage: 0.18143432","time: 7<br />percentage: 0.18143432","time: 6<br />percentage: 0.23115324","time: 5<br />percentage: 0.04340265","time: 4<br />percentage: 0.18816389","time: 3<br />percentage: 0.14003888","time: 2<br />percentage: 0.11830563","time: 1<br />percentage: 0.23065679","time: 1<br />percentage: 0.23065679"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,182,235,0.6)","hoveron":"points","name":"G","legendgroup":"G","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,6,5,4,3,2,1,1],"y":[0.0431954761148812,0.0461565556481675,0.0700592505335687,0.104374332895514,0.0850939136595078,0.11438347917224,0.250372434447255,0.332277061100065,0.277235154905171,0.266370917458233,0.260578750930305,0.322611352526526,0.204472378724998,0.158757192293638,0.0431954761148812],"text":["time: 1<br />percentage: 0.11556172","time: 2<br />percentage: 0.15831582","time: 3<br />percentage: 0.25255210","time: 4<br />percentage: 0.15620442","time: 5<br />percentage: 0.18127700","time: 6<br />percentage: 0.16285168","time: 7<br />percentage: 0.08190463","time: 7<br />percentage: 0.08190463","time: 6<br />percentage: 0.16285168","time: 5<br />percentage: 0.18127700","time: 4<br />percentage: 0.15620442","time: 3<br />percentage: 0.25255210","time: 2<br />percentage: 0.15831582","time: 1<br />percentage: 0.11556172","time: 1<br />percentage: 0.11556172"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(165,138,255,0.6)","hoveron":"points","name":"F","legendgroup":"F","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,7,7,6,5,4,3,2,1,1],"y":[0,0,0,0,0,0,0,0,0.250372434447255,0.11438347917224,0.0850939136595078,0.104374332895514,0.0700592505335687,0.0461565556481675,0.0431954761148812,0],"text":["time: 1<br />percentage: 0.04319548","time: 2<br />percentage: 0.04615656","time: 3<br />percentage: 0.07005925","time: 4<br />percentage: 0.10437433","time: 5<br />percentage: 0.08509391","time: 6<br />percentage: 0.11438348","time: 7<br />percentage: 0.25037243","time: 7<br />percentage: 0.25037243","time: 7<br />percentage: 0.25037243","time: 6<br />percentage: 0.11438348","time: 5<br />percentage: 0.08509391","time: 4<br />percentage: 0.10437433","time: 3<br />percentage: 0.07005925","time: 2<br />percentage: 0.04615656","time: 1<br />percentage: 0.04319548","time: 1<br />percentage: 0.04319548"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(0,0,0,0.6)","dash":"solid"},"fill":"toself","fillcolor":"rgba(251,97,215,0.6)","hoveron":"points","name":"C","legendgroup":"C","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.7,7.3],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"percentage","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"group","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3bac27303be1":{"x":{},"y":{},"fill":{},"type":"scatter"}},"cur_data":"3bac27303be1","visdat":{"3bac27303be1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>



### What About Dash?

[Dash for R](https://dashr.plot.ly/) is an open-source framework for building analytical applications, with no Javascript required, and it is tightly integrated with the Plotly graphing library. 

Learn about how to install Dash for R at https://dashr.plot.ly/installation.

Everywhere in this page that you see `fig`, you can display the same figure in a Dash for R application by passing it to the `figure` argument of the [`Graph` component](https://dashr.plot.ly/dash-core-components/graph) from the built-in `dashCoreComponents` package like this:


```r
library(plotly)

fig <- plot_ly() 
# fig <- fig %>% add_trace( ... )
# fig <- fig %>% layout( ... ) 

library(dash)
library(dashCoreComponents)
library(dashHtmlComponents)

app <- Dash$new()
app$layout(
    htmlDiv(
        list(
            dccGraph(figure=fig) 
        )
     )
)

app$run_server(debug=TRUE, dev_tools_hot_reload=FALSE)
```
